{% load static %}
<!DOCTYPE html>
<HTML lang="en">
	<HEAD>
		<TITLE>SaveLogs</TITLE>
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
		<!-- Bootstrap core CSS -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet">
		<!-- Material Design Bootstrap -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.0/css/mdb.min.css" rel="stylesheet">


		<link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
		<link href="https://cdn.datatables.net/buttons/1.5.6/css/buttons.dataTables.min.css rel="stylesheet">


		<!-- JQuery -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<!-- Bootstrap tooltips -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
		<!-- Bootstrap core JavaScript -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.2.1/js/bootstrap.min.js"></script>
		<!-- MDB core JavaScript -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.0/js/mdb.min.js"></script>
		
		<!-- end MDB -->
		<link rel= "stylesheet" href= "{% static 'bootstrap.css' %}" type=text/css>
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!-- <link rel= "stylesheet" href= "{% static 'bootstrap.css' %}" type=text/css>Import External CSS -->

		<style type="text/css">
						
			.pagination {

				text-align: center;
				margin-top: 1em;

			}
			.pagination-action{
				
				display: inline-block;
				padding: 0.5em;
				color: #bac4c4;
				font-size: 1.5em;

			}

			.pagination-action:hover{

				color:#3354AA;
			}

			.pagination-number{
				background-color: #6D85C7;
				padding: 0.5em 0.8em;
				color: #fff;
				border-radius: 2px;
			}

			.pagination-number, .pagination-current{
				background-color: #3354AA;
			}

			.pagination-number:hover{

				color:#000000;
			}
			 #div10{ background: #999999; }
      #div9{ background: #999999; }
		</style>


	</HEAD>
	<BODY>
		<nav class="navigation"><!-- Menu Buttons -->

    <!-- Home Button -->
    <ul class="menu"  ><li><a class="active" href="{% url "index" %}"><svg class="home" width="30px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M419.492,275.815v166.213H300.725v-90.33h-89.451v90.33H92.507V275.815H50L256,69.972l206,205.844H419.492 z M394.072,88.472h-47.917v38.311l47.917,48.023V88.472z"/></svg><span title="Home"> Home </span></a></li>

    <!--Logs -->
    <div id="preview">

    <li ><a href="#"  ><svg class="current" width="50px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M407.448,360.474c-59.036-13.617-113.989-25.541-87.375-75.717 c81.01-152.729,21.473-234.406-64.072-234.406c-87.231,0-145.303,84.812-64.072,234.406c27.412,50.482-29.608,62.393-87.375,75.717 c-59.012,13.609-54.473,44.723-54.473,101.176h411.838C461.919,405.196,466.458,374.083,407.448,360.474z"/></svg><span title="SaveLogs">AzureLog </span></a></li>



    <div id="div10"  style="background-color: white,width: 100%;">
    
    
    <!-- SaveLogs -->
    <li><a  href="{% url "upload" %}" ><svg class="work" width="50px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M407.448,360.474c-59.036-13.617-113.989-25.541-87.375-75.717 c81.01-152.729,21.473-234.406-64.072-234.406c-87.231,0-145.303,84.812-64.072,234.406c27.412,50.482-29.608,62.393-87.375,75.717 c-59.012,13.609-54.473,44.723-54.473,101.176h411.838C461.919,405.196,466.458,374.083,407.448,360.474z"/></svg><span title="SaveLogs"> SaveLogs </span></a></li>


    <!-- DisplayLogs -->
    <li><a  href="{% url "displayLogs" %}"><svg class="current" width="50px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M201.875,141.084h-30v-30.563c0-11.747,9.523-21.271,21.271-21.271h125.709 c11.747,0,21.271,9.523,21.271,21.271v30.563h-30v-17.063c0-3.739-3.031-6.771-6.771-6.771h-94.709 c-3.739,0-6.771,3.031-6.771,6.771V141.084z M462,161.084V422.75H50V161.084H462z M347.818,228.582l-4.721-10.858 c-44.045,27.402-67.739,48.047-103.599,88.742c-19.074-13.598-29.838-19.846-46.809-28.057l-14.509,13.412 c29.016,26.895,44.784,44.631,68.409,72.456C284.896,295.584,311.497,260.279,347.818,228.582z"/></svg><span title="DisplayLogs"> DisplayLogs </span></a></li>


    </div>
  </div>


    

    <!-- DisplayIncident -->
    <li><a href="{% url "DisplayIncident" %}" ><svg class="work" width="50px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M201.875,141.084h-30v-30.563c0-11.747,9.523-21.271,21.271-21.271h125.709 c11.747,0,21.271,9.523,21.271,21.271v30.563h-30v-17.063c0-3.739-3.031-6.771-6.771-6.771h-94.709 c-3.739,0-6.771,3.031-6.771,6.771V141.084z M462,161.084V422.75H50V161.084H462z M347.818,228.582l-4.721-10.858 c-44.045,27.402-67.739,48.047-103.599,88.742c-19.074-13.598-29.838-19.846-46.809-28.057l-14.509,13.412 c29.016,26.895,44.784,44.631,68.409,72.456C284.896,295.584,311.497,260.279,347.818,228.582z"/></svg><span title="DisplayIncident">Incident</span></a></li>
  
    <li><a href="{% url "list" %}"><svg class="work" width="50px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M170.544,239.052L50,146.454v213.142L170.544,239.052z M460.928,103.407H51.416l204.593,157.162L460.928,103.407z M313.355,260.696l-57.364,43.994l-57.454-44.135L50.5,408.593h410.751L313.355,260.696z M341.367,239.212L462,359.845V146.693L341.367,239.212z"/></svg><span title="certificate"> certificate </span></a></li>

    <li><a href="{% url "service_account" %}"><svg class="work" width="50px" height="30px" version="1.1" xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path d="M225.741,122.262c-10.096-4.89-19.027-8.84-27.496-12.287C211.636,74.43,230.974,51,256.001,51 c24.381,0,43.363,22.232,56.707,56.239c-8.562,3.61-17.355,7.632-27.344,12.62C275.138,93.088,263.472,81,256.001,81 C248.31,81,236.177,93.811,225.741,122.262z M256.001,431c-7.471,0-19.135-12.088-29.361-38.86 c-10.084,5.036-18.803,9.016-27.346,12.621C212.64,438.767,231.62,461,256.001,461c25.029,0,44.365-23.43,57.758-58.974 c-8.439-3.436-17.34-7.367-27.496-12.288C275.827,418.19,263.692,431,256.001,431z M174.112,393.154 c-33.35,12.045-83.111,23.78-102.887-5.42c-9.77-14.427-13.416-42.163,24.695-92.376c10.111-13.322,21.816-26.408,33.689-38.419 c26.635-26.545,56.641-52.096,95.738-78.552c-18.822-10.192-39.367-19.936-59.412-27.187c-20.52-7.424-38.586-11.535-52.428-11.535 c-8.842,0-15.404,1.843-17.553,4.93c-2.285,3.281-2.398,13.373,7.744,31.476c1.201-0.132,2.418-0.206,3.652-0.206 c18.225,0,33,14.775,33,33c0,18.227-14.775,33-33,33s-33-14.773-33-33c0-5.902,1.559-11.439,4.273-16.233 c-19.311-33.481-15.328-53.631-7.291-65.177c5.648-8.115,17.551-17.789,42.174-17.789c43.723,0,102.635,28.356,140.564,50.322 c38.51-23.28,99.422-53.988,144.42-53.988c24.723,0,36.639,9.932,42.281,18.264c9.77,14.428,13.416,42.164-24.693,92.377 C362.44,287.316,255.792,363.653,174.112,393.154z M392.185,198.504c26.182-34.497,26.984-52.643,23.75-57.418 c-2.189-3.232-8.545-5.086-17.441-5.086c-33.951,0-85.664,24.93-115.436,41.803c21.982,14.287,42.518,29.346,61.24,44.701 c-7.084,7.058-14.51,13.981-22.102,20.68c-20.783-16.807-43.885-33.264-67.832-48.011c-27.5,17.708-55.186,38.509-80.055,60.672 c18.705,16.243,40.973,33.296,64.725,49.076c-9.086,5.654-18.26,11.073-28.729,16.744c-0.004-0.003-0.006-0.005-0.01-0.007 c-0.078-0.055-0.154-0.109-0.232-0.164c-19.885-13.853-39.51-29.054-57.662-44.965c-49.02,49.168-62.828,84.795-56.336,94.383 c2.189,3.233,8.549,5.088,17.443,5.088c40.871,0,105.748-34.459,144.129-59.173C304.759,286.485,358.495,242.895,392.185,198.504z M433.524,319.63c2.441-4.605,3.83-9.855,3.83-15.432c0-18.225-14.775-33-33-33s-33,14.775-33,33c0,18.227,14.775,33,33,33 c1.521,0,3.016-0.112,4.48-0.312c9.611,17.505,9.453,27.295,7.209,30.519c-2.148,3.086-8.709,4.929-17.551,4.929 c-27.856,0-66.664-16.141-91.65-28.324c-8.357,5.839-18.73,12.77-28.846,19.122c33.494,17.717,82.752,39.202,120.496,39.202 c24.621,0,36.523-9.674,42.172-17.788C448.683,373.03,452.663,352.955,433.524,319.63z"/></svg><span title="Service Account"> ServiceAccount </span></a></li></ul>


    </nav>
  

  


<div id="ftable">
			<div class="container">
				<center>
				<h3> Microsoft Azure Logs </h3>
				{% if flag == 0 %}

				<h4></h4>

				{% else %}
				<h4 ><font color="Blue">Total <b>{{searchlen}}</b> Result Found</font></h4>

				
				{% endif %}	
				<!-- <input type="submit" value="Submit"> -->
				</center>
				<div style="background-color:lightgrey;padding: 5px;align: center; border: thick solid grey;border-width:0px;  ">
				<table>
					<col width="60">
  					<col width="180">
  					<col width="250">
  					<col width="400">
  					<col width="230">
  					

  						
  				
  					
  					
							<form id="streamform" action="{% url 'displayLogs' %}" method="POST" >
									{% csrf_token %}
								<thead>
									<tr>
										<th><font size="4">Search:</font></th>
											<th><input type="Date" class="form-control" name="Day" id="Day" placeholder="Search date" >
										</th>
										<th><input type="text" class="form-control" name="Activity" id="Activity" placeholder="Search Activity" >
										</th>
										<th><input type="text" class="form-control" name="ActorUserPrincipalName" id="ActorUserPrincipalName" placeholder="Search ActorUserPrincipalName" >
										</th>
										<th><input type="text" class="form-control" name="Target1DisplayName" id="Target1DisplayName" placeholder="Search Target1DisplayName" >
										</th>																			     
										<input type="submit" onclick="myFunction()" value="to view" id="submit" hidden="hidden" />
									</tr>
								</thead>
							</form>
						
						</table>
						</div>
				
					
						<table id="dtBasicExample" class="table table-striped table-bordered table-sm table-hover table-bordered" cellspacing="0" width="100%" style="margin-top: 10px;">

						<thead>
							<tr>
								<th ><center><b>ActivityDate</center></th>
								<th><center><b>Activity</center></th>
								<th><center><b>ActorUserPrincipalName</center></th>
								<th><center><b>Target1DisplayName</center></th>
							</tr>
						</thead>
						<tbody>
							<tr class="gradeX">
								{% for item in users %}
									<td>{{item.0}}</td>
									<td>{{item.4}}</td>
									<td>{{item.10}}</td>
									<td class="center">{{item.14}}</td>
								</tr>
								
							{% endfor %}
						</tbody>
	<tfoot>
	
	</tfoot>


	</div>
</Div>
</table>

<div class="pagination">
	<nav aria-label="Page navigation example">
	<ul class="pagination pg-blue">
	{% if users.has_previous %}

      <li class="page-item"><a class="page-link" href="?page={{ users.previous_page_number}}">Previous</a></li>

	{% endif %}

	{% for num in users.paginator.page_range %}
		{% if users.number == num %}

<li class="page-item active">
      <span class="page-link">
       {{ num }}
        <span class="sr-only">(current)</span>
      </span>
    </li>


		{% if users.number < totaltwo %}	

		<li class="page-item"><a class="page-link" href="?page={{ next}}">{{next}}</a></li>
			
		{% endif %}
		{% if users.number < totalone %}	











		<li class="page-item"><a class="page-link" href="?page={{ next1}}">{{next1}}</a></li>
			
		{% endif %}	
		{% if users.number < totalone %}

<li class="page-item"><a class="page-link" href="?page={{ next }}">Next</a></li>
			
		{% endif %}	
		{% if users.number == totalpage %}	

<li class="page-item"><a class="page-link" href="?page={{ next}}">{{next}}</a></li>

		{% endif %}



		{% elif num > users.number|add:'-3' and num < users.number|add:'3' %}
		
<li class="page-item"><a class="page-link" href="?page={{ num}}">{{num}}</a></li>	
		

		{% endif %}

	{% endfor %}

	{% if users.has_next %}
	 <li class="page-item"><a class="page-link" href="?page={{ users.next_page_number }}">Next</a></li>

	

	{% endif %}
				
	</div>

		
		
		</div>
		<script type="text/javascript">
			function myFunction(){
			var day = document.getElementById("Day").value;
			 sessionStorage.setItem('date',day);
			 var activity = document.getElementById("Activity").value;
			 sessionStorage.setItem('Act',activity);
			 var actor = document.getElementById("ActorUserPrinicipalName").value;
			 sessionStorage.setItem('Actor',actor);
			 var target = document.getElementById("Target1Name").value;
			 sessionStorage.setItem('tar',target);
			 retrive();
			 
		}
		</script>


		<script type="text/javascript">
			var date1 = sessionStorage.getItem('date');
		  document.getElementById("Day").value =date1;

		  var data = sessionStorage.getItem('Act');
		  document.getElementById("Activity").value =data;

		  var data2 = sessionStorage.getItem('Actor');
		  document.getElementById("ActorUserPrinicipalName").value =data2;

		  var data3 = sessionStorage.getItem('tar');
		  document.getElementById("Target1Name").value =data3;
		</script>
		
		
		

		
		



		<script>
		$('#dtBasicExample').dataTable( {
		paging: false,
		searching: false
		} );
		</script>

	

</BODY>
<script>
$(document).ready(function () {
	$('#div10').hide();
    $('#preview').hover(
  function () {
     // $('#div10').slideDown('medium');
      $('#div10').show();
  }, 
  function () {
     // $('#div10').slideUp(0);
     $('#div10').hide();
  }
);




    
});
</script>



<script>



$(document).ready(function () {
	$('#div9').hide();
    $('#view').hover(
  function () {
     $('#div9').show();
  }, 
  function () {
    $('#div9').hide();
  }
);

    
});
</script>

</html>